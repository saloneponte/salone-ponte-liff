# 顧客管理システム - 機能一覧

## 📋 実装済み機能

### 1. 顧客一覧管理
- **統計サマリー**: 総顧客数、今月新規、VIP顧客、離反リスク顧客の表示
- **顧客一覧テーブル**: 顧客情報、タグ、来店情報、累計金額、最終来店日
- **自動タグ付け**: VIP顧客、常連顧客、新規顧客、離反リスクの自動判定

### 2. 検索・フィルター機能
- **顧客検索**: 名前・電話番号での検索
- **タグフィルター**: VIP顧客、常連顧客、新規顧客、離反リスクでの絞り込み
- **来店期間フィルター**: 30日以内、60日以内、90日以内、180日以上での絞り込み
- **フィルターリセット**: 全フィルターの一括リセット

### 3. 顧客詳細管理（カルテ機能）
#### 基本情報タブ
- **個人情報**: 名前、電話番号、生年月日、職業
- **髪質・肌質情報**: 髪質、髪の量、アレルギー、特記事項
- **タグ管理**: 顧客タグの追加・削除

#### 施術履歴タブ
- **予約履歴表示**: 過去の施術内容、担当者、料金、日付
- **履歴ソート**: 日付降順での表示

#### 施術写真タブ
- **写真アップロード**: 複数写真の一括アップロード
- **写真管理**: Firebase Storageを使用した画像保存
- **写真表示**: グリッド表示での写真一覧

#### カルテメモタブ
- **メモ追加**: タイトル付きメモの作成
- **メモ管理**: 作成日時、作成者付きでの管理
- **メモ削除**: 不要メモの削除機能

### 4. 新規顧客追加
- **簡単登録**: 名前と電話番号での基本登録
- **自動タグ付け**: 新規顧客タグの自動付与
- **即座編集**: 登録後すぐにカルテモーダルを開く

### 5. データ出力機能
- **CSV出力**: 顧客一覧のCSVエクスポート
- **日本語対応**: 文字化け対応済みのUTF-8 BOM付き出力

## 🏷️ 自動タグ判定ルール

### VIP顧客
- 累計金額: 50,000円以上
- 来店回数: 10回以上

### 常連顧客
- 来店回数: 5回以上
- 最終来店: 60日以内

### 新規顧客
- 来店回数: 2回以下

### 離反リスク
- 最終来店: 90日以上前

## 📊 統計機能

### リアルタイム集計
- **総顧客数**: 登録済み顧客の総数
- **今月新規**: 当月新規登録顧客数
- **VIP顧客数**: VIPタグ付き顧客数
- **離反リスク数**: 離反リスクタグ付き顧客数

## 🎨 UI/UX特徴

### レスポンシブデザイン
- **モバイル対応**: タブレット・スマートフォンでの操作最適化
- **グリッドレイアウト**: 画面サイズに応じた自動調整

### モーダルベース編集
- **詳細表示**: 顧客情報の詳細をモーダルで表示
- **タブ式UI**: 情報種別ごとのタブ切り替え

### 視覚的フィードバック
- **カラーコードタグ**: タグ種別による色分け表示
- **ホバーエフェクト**: マウスオーバー時の視覚的フィードバック

## 🔧 技術仕様

### データベース構造 (Firestore)
```javascript
customers: {
  id: string,
  name: string,
  phone: string,
  birthday: string,
  occupation: string,
  hairType: string,
  hairVolume: string,
  allergies: string,
  notes: string,
  tags: array,
  reservations: array,
  photos: array,
  customerNotes: array,
  createdAt: timestamp,
  updatedAt: timestamp
}
```

### ファイル保存 (Firebase Storage)
```
customers/{customerId}/{timestamp}_{filename}
```

## 🔄 ダッシュボード連携

### ナビゲーション
- **戻るボタン**: ダッシュボードへの簡単復帰
- **ブラウザ履歴対応**: ブラウザの戻るボタンサポート

### データ共有
- **Firebase統合**: リアルタイムデータ同期
- **予約データ連携**: 予約システムとの自動連携

## 🚀 今後の拡張予定

### 機能追加案
- **顧客セグメント分析**: より詳細な顧客分類
- **マーケティング機能**: 顧客層別のキャンペーン送信
- **予約パターン分析**: 来店傾向の分析機能
- **売上連動**: 顧客別売上分析

### UI改善案
- **バルク操作**: 複数顧客の一括編集
- **高度検索**: より詳細な検索条件
- **データ可視化**: グラフによる顧客分析

---

**✅ 実装完了**: 包括的な顧客管理システムが完成しました。